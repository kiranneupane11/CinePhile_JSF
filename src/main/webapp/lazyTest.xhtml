<ui:composition template="/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="title">Test</ui:define>
    
    <ui:define name="content">

<div class="card">
    <p:tabView id="lazyplaylistTabView" cache="false" dynamic="true">
        <p:ajax event="tabChange" listener="#{lazyPlaylistBean.onTabChange}" update="lazyplaylistTabView" />
        <c:forEach items="#{lazyPlaylistBean.playlists}" var="playlistWrapper">
            <p:tab id="lazyplaylistTab_#{playlistWrapper.playlistId}" title="#{playlistWrapper.listName}">
                <f:attribute name="playlistId" value="#{playlistWrapper.playlistId}" />
                <ui:repeat value="#{playlistWrapper.movies}" var="usermovieRating">
                <p:panel style="margin-bottom: 10px;">
                    <p:row>
                        <p:column styleClass="ui-g-3" style="text-align: left; vertical-align: top;">
                            <h:graphicImage value="#{usermovieRating.imageUrl}" style="width: 100px; height: 150px; display: block;" />
                        </p:column>
                        <p:column styleClass="ui-g-6" style="vertical-align: top;">
                            <h3 style="margin-bottom: 5px;">#{usermovieRating.title}</h3>
                            <p style="margin-bottom: 5px;">#{usermovieRating.description}</p>
                            <h:outputText styleClass="genre-item" value="#{usermovieRating.genre}" />
                            <p:rating readonly="true" value="#{usermovieRating.ratingAsInt}" stars="10" styleClass="rating-value" style="margin-bottom: 5px;"
                                      rendered="#{playlistWrapper.listName eq 'Watched' or playlistWrapper.listName eq 'Dropped'}"/>
                            <h:outputText value=" " rendered="#{not (playlistWrapper.listName eq 'Watched' or playlistWrapper.listName eq 'Dropped')}"
                                          style="display: block; height: 1.5rem;" />
                        </p:column>
                        <p:column styleClass="ui-g-3" style="vertical-align: top;">
                            <h:panelGroup styleClass="right-column-content">
                                <!-- If these methods exist in LazyPlaylistBean, keep them. Otherwise, you may need to remove or update accordingly. -->
                                <p:commandButton value="Remove"
                                                 icon="pi pi-trash"
                                                 action="#{lazyPlaylistBean.prepareRemoveDialog(playlistWrapper, usermovieRating)}"
                                                 oncomplete="PF('removeDialog').show()"
                                                 update=":mainForm:removeDialogForm, :mainForm:growl"
                                                 styleClass="ui-button-danger" process="@this" />
                                <p:commandButton value="Edit"
                                                 icon="pi pi-pencil"
                                                 action="#{lazyPlaylistBean.prepareEditMovie(playlistWrapper, usermovieRating)}"
                                                 update=":mainForm:editDialogForm, :mainForm:lazyplaylistTabView :mainForm:lazyplaylistTabView:lazyplaylistTab :mainForm:growl"
                                                 oncomplete="PF('editDialog').show()"
                                                 styleClass="ui-button-info" process="@this" />
                            </h:panelGroup>
                        </p:column>
                    </p:row>
                </p:panel>
            </ui:repeat>
        </p:tab>
    </c:forEach>
    </p:tabView>
</div>

    
    </ui:define>
</ui:composition>
