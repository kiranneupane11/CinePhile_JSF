<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
  <h:head>
    <title><ui:insert name="title">Default Title</ui:insert></title>
  </h:head>
  <h:body>
    <h:form id="adminForm">
      <!-- Header with Logo and Authentication Controls -->
      <p:toolbar style="width: 100%;">
        <f:facet name="left">
            <h:link outcome="/adminpanel.xhtml">
          <p:graphicImage name="logo-no-background.svg" library="logos" alt="Cinephile Logo" height="150" width="150" />
          </h:link>
        </f:facet>
        <f:facet name="right">
          <h:panelGroup layout="block" style="display: flex; align-items: center;">
            <h:panelGroup layout="block">
              <!-- Show Login and Sign Up buttons when not logged in -->
              <p:panel rendered="#{not authenticationBean.loggedIn}" style="border: none; padding: 0;">
                <p:button value="Login" outcome="/login.xhtml" styleClass="ui-button-info" />
              </p:panel>
              <p:panel rendered="#{not authenticationBean.loggedIn}" style="border: none; padding: 0; margin-left: 5px;">
                <p:button value="Sign Up" outcome="/signup.xhtml" styleClass="ui-button-success" />
              </p:panel>
              <!-- Show dropdown menu with username and icon when logged in -->
              <p:panel rendered="#{authenticationBean.loggedIn}" style="border: none; padding: 0; margin-left: 5px;">
                <p:menuButton value="#{authenticationBean.loggedInUser.username}" icon="pi pi-user" styleClass="ui-button-secondary">
                  <p:menuitem value="Logout" action="#{authenticationBean.logout}" update="@form" icon="pi pi-sign-out" />
                </p:menuButton>
              </p:panel>
            </h:panelGroup>
          </h:panelGroup>
        </f:facet>
      </p:toolbar>

      <!-- Menu Bar (Shown Only When Logged In) -->
      <p:toolbar style="width: 100%;" rendered="#{authenticationBean.loggedIn}">
        <p:toolbarGroup align="left" style="width: 100%;">
          <p:menubar>
            <p:menuitem value="Movies" outcome="/dbmovies.xhtml" icon="pi pi-list"/>
            <p:menuitem value="Users" outcome="/dbusers.xhtml" icon="pi pi-users"/>
          </p:menubar>
        </p:toolbarGroup>
      </p:toolbar>
    </h:form>

      <!-- Content Area for Page-Specific Content -->
      <ui:insert name="content">Default Content</ui:insert>
  </h:body>
</html>