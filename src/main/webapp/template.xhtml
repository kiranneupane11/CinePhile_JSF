<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
  <h:head>
    <title><ui:insert name="title">Default Title</ui:insert></title>
    <h:outputStylesheet library="css" name="movie-card.css" />
    <h:outputStylesheet library="css" name="movie-details.css" />
    <h:outputScript library="js" name="overlay.js" />
  </h:head>
  <h:body>
    <h:form id="mainForm">
      <!-- Header with Logo and Authentication Controls -->
      <p:toolbar style="width: 100%;">
        <f:facet name="left">
          <p:graphicImage name="logo-no-background.svg" library="logos" alt="Cinephile Logo" height="150" width="150" />
        </f:facet>
        <f:facet name="right">
          <h:panelGroup layout="block" style="display: flex; align-items: center;">
            <h:panelGroup layout="block">
              <p:panel rendered="#{not authenticationBean.loggedIn}" style="border: none; padding: 0;">
                <p:button value="Login" outcome="/login.xhtml" styleClass="ui-button-info" />
              </p:panel>
              <p:panel rendered="#{not authenticationBean.loggedIn}" style="border: none; padding: 0; margin-left: 5px;">
                <p:button value="Sign Up" outcome="/signup.xhtml" styleClass="ui-button-success" />
              </p:panel>
              <p:panel rendered="#{authenticationBean.loggedIn}" style="border: none; padding: 0; margin-left: 5px;">
                <p:commandButton value="Logout" action="#{authenticationBean.logout}" update="@form" styleClass="ui-button-danger" />
              </p:panel>
            </h:panelGroup>
          </h:panelGroup>
        </f:facet>
      </p:toolbar>

      <!-- Menu Bar (Shown Only When Logged In) -->
      <p:toolbar style="width: 100%;" rendered="#{authenticationBean.loggedIn}">
        <p:toolbarGroup align="left" style="width: 100%;">
          <p:menubar>
            <p:menuitem value="Home" outcome="/availablemovies.xhtml" icon="pi pi-home"/>
            <p:menuitem value="My Playlist" outcome="/addtolist.xhtml" icon="pi pi-list"/>
            <p:menuitem value="Trending Movies" outcome="/trending.xhtml" icon="pi pi-chart-line"/>
            <p:menuitem value="Top Rated Movies" outcome="/toprated.xhtml" icon="pi pi-star"/>
          </p:menubar>
        </p:toolbarGroup>
      </p:toolbar>
      
      <p:toolbar style="width: 100%;">
      <p:toolbarGroup align="left" style="width: 100%;">
        <p:inputText id="searchTerm" 
                     value="#{movieViewBean.searchTerm}" 
                     placeholder="Search movies, lists..." 
                     style="width: 100%;">
          <p:ajax event="keyup" listener="#{movieViewBean.searchMovies}" />
        </p:inputText>
      </p:toolbarGroup>
    </p:toolbar>

      <!-- Content Area for Page-Specific Content -->
      <ui:insert name="content">Default Content</ui:insert>
    </h:form>
  </h:body>
</html>